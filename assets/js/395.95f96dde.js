(window.webpackJsonp=window.webpackJsonp||[]).push([[395],{874:function(s,t,a){"use strict";a.r(t);var n=a(11),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"事件监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件监听"}},[s._v("#")]),s._v(" 事件监听")]),s._v(" "),t("p",[t("strong",[s._v("本文档概述"),t("a",{attrs:{href:"https://github.com/tencent-connect/botpy/blob/feature/botpy_1.0/botpy/flags.py",target:"_blank",rel:"noopener noreferrer"}},[s._v("botpy的事件监听"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" botpy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"使用方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[s._v("#")]),s._v(" 使用方式")]),s._v(" "),t("p",[s._v("通过继承实现"),t("code",[s._v("bot.Client")]),s._v(", 实现自己的机器人Client")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("MyClient")]),s._v("类中调用函数实现处理事件的功能")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"监听的事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#监听的事件"}},[s._v("#")]),s._v(" 监听的事件")]),s._v(" "),t("h3",{attrs:{id:"公域消息事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#公域消息事件的监听"}},[s._v("#")]),s._v(" 公域消息事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("public_guild_messages")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("public_guild_messages"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_at_message_create(self, message: Message)")]),s._v(" "),t("td",[s._v("当收到@机器人的消息时")])]),s._v(" "),t("tr",[t("td",[s._v("on_public_message_delete(self, message: Message)")]),s._v(" "),t("td",[s._v("当频道的消息被删除时")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Message")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Message\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_at_message_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_public_message_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"消息事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息事件的监听"}},[s._v("#")]),s._v(" 消息事件的监听")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("仅 私域 机器人能够设置此 intents")])])]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("guild_messages")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("guild_messages"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_message_create(self, message: Message)")]),s._v(" "),t("td",[s._v("发送消息事件，代表频道内的全部消息，而不只是 at 机器人的消息。"),t("br"),s._v("内容与 AT_MESSAGE_CREATE 相同")])]),s._v(" "),t("tr",[t("td",[s._v("on_message_delete(self, message: Message)")]),s._v(" "),t("td",[s._v("删除（撤回）消息事件")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Message")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Message\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"私信事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#私信事件的监听"}},[s._v("#")]),s._v(" 私信事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("direct_message")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("direct_message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_direct_message_create(self, message: DirectMessage)")]),s._v(" "),t("td",[s._v("当收到用户发给机器人的私信消息时")])]),s._v(" "),t("tr",[t("td",[s._v("on_direct_message_delete(self, message: DirectMessage)")]),s._v(" "),t("td",[s._v("删除（撤回）消息事件")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("DirectMessage")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" DirectMessage\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_direct_message_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DirectMessage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_direct_message_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DirectMessage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"消息相关互动事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息相关互动事件的监听"}},[s._v("#")]),s._v(" 消息相关互动事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("guild_message_reactions")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("guild_message_reactions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_message_reaction_add(self, reaction: Reaction)")]),s._v(" "),t("td",[s._v("为消息添加表情表态")])]),s._v(" "),t("tr",[t("td",[s._v("on_message_reaction_remove(self, reaction: Reaction)")]),s._v(" "),t("td",[s._v("为消息删除表情表态")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Reaction")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reaction "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Reaction\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message_reaction_add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Reaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message_reaction_remove")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Reaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"频道事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#频道事件的监听"}},[s._v("#")]),s._v(" 频道事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("guilds")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("guilds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_guild_create(self, guild: Guild)")]),s._v(" "),t("td",[s._v("当机器人加入新guild时")])]),s._v(" "),t("tr",[t("td",[s._v("on_guild_update(self, guild: Guild)")]),s._v(" "),t("td",[s._v("当guild资料发生变更时")])]),s._v(" "),t("tr",[t("td",[s._v("on_guild_delete(self, guild: Guild)")]),s._v(" "),t("td",[s._v("当机器人退出guild时")])]),s._v(" "),t("tr",[t("td",[s._v("on_channel_create(self, channel: Channel)")]),s._v(" "),t("td",[s._v("当channel被创建时")])]),s._v(" "),t("tr",[t("td",[s._v("on_channel_update(self, channel: Channel)")]),s._v(" "),t("td",[s._v("当channel被更新时")])]),s._v(" "),t("tr",[t("td",[s._v("on_channel_delete(self, channel: Channel)")]),s._v(" "),t("td",[s._v("当channel被删除时")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Guild")]),s._v("和"),t("code",[s._v("Channel")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("guild "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Guild\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("channel "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Channel\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_guild_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" guild"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Guild"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_guild_update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" guild"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Guild"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_guild_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" guild"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Guild"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_channel_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" channel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Channel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_channel_update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" channel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Channel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_channel_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" channel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Channel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("h3",{attrs:{id:"频道成员事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#频道成员事件的监听"}},[s._v("#")]),s._v(" 频道成员事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("guild_members")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("guild_members"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_guild_member_add(self, member: Member)")]),s._v(" "),t("td",[s._v("当成员加入时")])]),s._v(" "),t("tr",[t("td",[s._v("on_guild_member_update(self, member: Member)")]),s._v(" "),t("td",[s._v("当成员资料变更时")])]),s._v(" "),t("tr",[t("td",[s._v("on_guild_member_remove(self, member: Member)")]),s._v(" "),t("td",[s._v("当成员被移除时")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("GuildMember")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Member\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_guild_member_add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Member"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_guild_member_update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Member"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_guild_member_remove")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" member"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Member"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"互动事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#互动事件的监听"}},[s._v("#")]),s._v(" 互动事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("interaction")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("interaction"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_interaction_create(self, interaction: Interaction)")]),s._v(" "),t("td",[s._v("当收到用户发给机器人的私信消息时")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Interaction")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("interaction "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Interaction\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_interaction_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" interaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Interaction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"消息审核事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息审核事件的监听"}},[s._v("#")]),s._v(" 消息审核事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("message_audit")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message_audit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_message_audit_pass(self, message: MessageAudit)")]),s._v(" "),t("td",[s._v("消息审核通过")])]),s._v(" "),t("tr",[t("td",[s._v("on_message_audit_reject(self, message: MessageAudit)")]),s._v(" "),t("td",[s._v("消息审核不通过")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("MessageAudit")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" MessageAudit\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message_audit_pass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" MessageAudit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message_audit_reject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" MessageAudit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"论坛事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#论坛事件的监听"}},[s._v("#")]),s._v(" 论坛事件的监听")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("仅 私域 机器人能够设置此 intents")])])]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("forums")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("forums"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_forum_thread_create(self, thread: Thread)")]),s._v(" "),t("td",[s._v("当用户创建主题时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_thread_update(self, thread: Thread)")]),s._v(" "),t("td",[s._v("当用户更新主题时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_thread_delete(self, thread: Thread)")]),s._v(" "),t("td",[s._v("当用户删除主题时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_post_create(self, post: Post)")]),s._v(" "),t("td",[s._v("当用户创建帖子时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_post_delete(self, post: Post)")]),s._v(" "),t("td",[s._v("当用户删除帖子时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_reply_create(self, reply: Reply)")]),s._v(" "),t("td",[s._v("当用户回复评论时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_reply_delete(self, reply: Reply)")]),s._v(" "),t("td",[s._v("当用户删除评论时")])]),s._v(" "),t("tr",[t("td",[s._v("on_forum_publish_audit_result(self, auditresult: AuditResult)")]),s._v(" "),t("td",[s._v("当用户发表审核通过时")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Thread")]),s._v("、"),t("code",[s._v("Post")]),s._v("、"),t("code",[s._v("Reply")]),s._v("和"),t("code",[s._v("AuditResult")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forum "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Thread\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("types"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("forum "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Reply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" AuditResult\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_thread_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_thread_update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_thread_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_post_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_post_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_reply_create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Reply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_reply_delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Reply"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_forum_publish_audit_result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" auditresult"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" AuditResult"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("h3",{attrs:{id:"音频事件的监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#音频事件的监听"}},[s._v("#")]),s._v(" 音频事件的监听")]),s._v(" "),t("p",[s._v("首先需要订阅事件"),t("code",[s._v("audio_action")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("audio_action"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("对应函数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("on_audio_start(self, audio: Audio)")]),s._v(" "),t("td",[s._v("音频开始播放时")])]),s._v(" "),t("tr",[t("td",[s._v("on_audio_finish(self, audio: Audio)")]),s._v(" "),t("td",[s._v("音频播放结束时")])]),s._v(" "),t("tr",[t("td",[s._v("on_audio_on_mic(self, audio: Audio)")]),s._v(" "),t("td",[s._v("上麦时")])]),s._v(" "),t("tr",[t("td",[s._v("on_audio_off_mic(self, audio: Audio)")]),s._v(" "),t("td",[s._v("下麦时")])])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注：需要引入"),t("code",[s._v("Audio")])])])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("audio "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Audio\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_audio_start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_audio_finish")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_audio_on_mic")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_audio_off_mic")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Audio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        此处为处理该事件的代码\n        """')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"订阅事件的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#订阅事件的方法"}},[s._v("#")]),s._v(" 订阅事件的方法")]),s._v(" "),t("h3",{attrs:{id:"方法一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一"}},[s._v("#")]),s._v(" 方法一：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nclient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("在Intents中填入对应的"),t("a",{attrs:{href:"#%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8"}},[s._v("参数")])]),s._v(" "),t("p",[s._v("例子：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("public_guild_messages"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" direct_message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" guilds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"方法二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二"}},[s._v("#")]),s._v(" 方法二：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后打开对应的订阅("),t("a",{attrs:{href:"#%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8"}},[s._v("参数列表")]),s._v(")")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("public_guild_messages"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\nintents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("direct_message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\nintents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("guilds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("说明")])])]),s._v(" "),t("p",[s._v("方法二对应的快捷订阅方式为")]),s._v(" "),t("ol",[t("li",[s._v("订阅所有事件")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("订阅所有的公域事件")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("intents "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" botpy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Intents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"参数列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数列表"}},[s._v("#")]),s._v(" 参数列表")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("public_guild_messages")]),s._v(" "),t("td",[s._v("公域消息事件")])]),s._v(" "),t("tr",[t("td",[s._v("guild_messages")]),s._v(" "),t("td",[s._v("消息事件 "),t("strong",[s._v("(仅 "),t("code",[s._v("私域")]),s._v(" 机器人能够设置此 intents)")])])]),s._v(" "),t("tr",[t("td",[s._v("direct_message")]),s._v(" "),t("td",[s._v("私信事件")])]),s._v(" "),t("tr",[t("td",[s._v("guild_message_reactions")]),s._v(" "),t("td",[s._v("消息相关互动事件")])]),s._v(" "),t("tr",[t("td",[s._v("guilds")]),s._v(" "),t("td",[s._v("频道事件")])]),s._v(" "),t("tr",[t("td",[s._v("guild_members")]),s._v(" "),t("td",[s._v("频道成员事件")])]),s._v(" "),t("tr",[t("td",[s._v("interaction")]),s._v(" "),t("td",[s._v("互动事件")])]),s._v(" "),t("tr",[t("td",[s._v("message_audit")]),s._v(" "),t("td",[s._v("消息审核事件")])]),s._v(" "),t("tr",[t("td",[s._v("forums")]),s._v(" "),t("td",[s._v("论坛事件 "),t("strong",[s._v("(仅 "),t("code",[s._v("私域")]),s._v(" 机器人能够设置此 intents)")])])]),s._v(" "),t("tr",[t("td",[s._v("audio_action")]),s._v(" "),t("td",[s._v("音频事件")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);