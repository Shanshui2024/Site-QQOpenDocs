(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{584:function(t,_,v){"use strict";v.r(_);var e=v(11),d=Object(e.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"获取频道和当前人信息"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#获取频道和当前人信息"}},[t._v("#")]),t._v(" 获取频道和当前人信息")]),t._v(" "),_("p",[t._v("适用场景：")]),t._v(" "),_("p",[t._v("1.机器人服务打开小程序后（机器人服务需在机器人开发者端-服务配置）")]),t._v(" "),_("p",[t._v("2.机器人发出的"),_("code",[t._v("ark")]),t._v(" 打开小程序后（"),_("code",[t._v("ark")]),t._v("模版的跳转"),_("code",[t._v("link")]),t._v("可以带上对应的参数）")]),t._v(" "),_("h2",{attrs:{id:"从-extenddata-中获取频道id"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#从-extenddata-中获取频道id"}},[t._v("#")]),t._v(" 从 extendData 中获取频道ID")]),t._v(" "),_("h3",{attrs:{id:"机器人服务打开小程序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#机器人服务打开小程序"}},[t._v("#")]),t._v(" 机器人服务打开小程序")]),t._v(" "),_("p",[t._v("开发者在开发者平台配置服务功能的时候，在 "),_("code",[t._v("extData")]),t._v(" 支持使用占位符来获取"),_("code",[t._v("频道ID")]),t._v("，"),_("code",[t._v("子频道ID")]),t._v("。")]),t._v(" "),_("p",[t._v("如："),_("code",[t._v("guildID=$OPENGUILDID$&channelID=$CHANNELID$")])]),t._v(" "),_("p",[t._v("平台会在频道中打开机器人面板的时候，对占位符进行替换。开发者可以在 "),_("code",[t._v("onLaunch")]),t._v(" 的时候从 "),_("code",[t._v("options.extendData")]),t._v(" 中获取数据。")]),t._v(" "),_("h3",{attrs:{id:"机器人发出的ark打开小程序"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#机器人发出的ark打开小程序"}},[t._v("#")]),t._v(" 机器人发出的ark打开小程序")]),t._v(" "),_("p",[t._v("由于机器人发送消息到频道的时候，是知道 "),_("code",[t._v("$OPENGUILDID$")]),t._v(" 和 "),_("code",[t._v("$CHANNELID$")]),t._v(" 的，所以可以在发送消息的时候将对应参数的值直接带到小程序地址上用于打开的时候调用小程序接口")]),t._v(" "),_("h2",{attrs:{id:"获取频道信息与当前人身份"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#获取频道信息与当前人身份"}},[t._v("#")]),t._v(" 获取频道信息与当前人身份")]),t._v(" "),_("p",[_("code",[t._v("qq.getGuildInfo(Object object)")])]),t._v(" "),_("h3",{attrs:{id:"调用参数-object-object"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#调用参数-object-object"}},[t._v("#")]),t._v(" 调用参数 Object object")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("属性")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("默认值")]),t._v(" "),_("th",[t._v("必填")]),t._v(" "),_("th",[t._v("说明")]),t._v(" "),_("th",[t._v("最低版本")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("open_guild_id")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("是")]),t._v(" "),_("td",[t._v("频道在机器人场景的 "),_("RouterLink",{attrs:{to:"/develop/api-v2/server-inter/channel/manage/guild/model.html#guild"}},[t._v("Guild")]),t._v(" id")],1),t._v(" "),_("td",[t._v("1.40.0")])]),t._v(" "),_("tr",[_("td",[t._v("channel_id")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("子频道Id")]),t._v(" "),_("td",[t._v("1.40.0")])]),t._v(" "),_("tr",[_("td",[t._v("success")]),t._v(" "),_("td",[t._v("function")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("接口调用成功的回调函数")]),t._v(" "),_("td",[t._v("1.40.0")])]),t._v(" "),_("tr",[_("td",[t._v("fail")]),t._v(" "),_("td",[t._v("function")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("接口调用失败的回调函数")]),t._v(" "),_("td",[t._v("1.40.0")])]),t._v(" "),_("tr",[_("td",[t._v("complete")]),t._v(" "),_("td",[t._v("function")]),t._v(" "),_("td"),t._v(" "),_("td",[t._v("否")]),t._v(" "),_("td",[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")]),t._v(" "),_("td",[t._v("1.40.0")])])])]),t._v(" "),_("p",[_("code",[t._v("open_guild_id")]),t._v(" 从小程序的 "),_("code",[t._v("extendData")]),t._v(" 上获取，即开发者在机器人平台配置小程序服务时候提示到的 "),_("code",[t._v("$OPENGUILDID$")])]),t._v(" "),_("h3",{attrs:{id:"object-success-回调函数参数-object-res"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#object-success-回调函数参数-object-res"}},[t._v("#")]),t._v(" Object.success 回调函数参数 Object res")]),t._v(" "),_("h4",{attrs:{id:"解密前"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#解密前"}},[t._v("#")]),t._v(" 解密前")]),t._v(" "),_("p",[t._v("res 得到的是加密之后的数据，需要开发者解密，解密方案参考: "),_("a",{attrs:{href:"https://q.qq.com/wiki/develop/game/frame/open-ability/signature.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("开放数据校验与解密"),_("OutboundLink")],1)]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("属性")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("encryptedData")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("加密之后的数据，需要解密")])]),t._v(" "),_("tr",[_("td",[t._v("iv")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("对称解密算法初始向量(base64)")])]),t._v(" "),_("tr",[_("td",[t._v("signature")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("签名(base64)")])])])]),t._v(" "),_("h3",{attrs:{id:"encrypteddata-解密后的数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#encrypteddata-解密后的数据"}},[t._v("#")]),t._v(" encryptedData 解密后的数据")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("属性")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("guild_name")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("频道名称")])]),t._v(" "),_("tr",[_("td",[t._v("member_role")]),t._v(" "),_("td",[t._v("number")]),t._v(" "),_("td",[t._v("当前成员角色 0成员/1管理员/2频道主")])]),t._v(" "),_("tr",[_("td",[t._v("channel_info")]),t._v(" "),_("td",[t._v("Object")]),t._v(" "),_("td",[t._v("子频道信息，只在请求上有channel_id的时候才会返回")])]),t._v(" "),_("tr",[_("td",[t._v("member_userid")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("当前用户在机器人场景的 "),_("RouterLink",{attrs:{to:"/develop/api-v2/openapi/user/model.html#user"}},[t._v("User")]),t._v(" id")],1)]),t._v(" "),_("tr",[_("td",[t._v("member_nick")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("当前用户在频道内的昵称")])]),t._v(" "),_("tr",[_("td",[t._v("open_guild_id")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[_("RouterLink",{attrs:{to:"/develop/api-v2/server-inter/channel/manage/guild/model.html#guild"}},[t._v("Guild")]),t._v(" id")],1)])])]),t._v(" "),_("h3",{attrs:{id:"object-channel-info-子频道信息"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#object-channel-info-子频道信息"}},[t._v("#")]),t._v(" Object channel_info 子频道信息")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("属性")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("channel_name")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("子频道名称")])]),t._v(" "),_("tr",[_("td",[t._v("channel_type")]),t._v(" "),_("td",[t._v("number")]),t._v(" "),_("td",[t._v("子频道类型")])]),t._v(" "),_("tr",[_("td",[t._v("is_accessible")]),t._v(" "),_("td",[t._v("number")]),t._v(" "),_("td",[t._v("是否可以访问该子频道，0不可访问、1可访问")])])])])])}),[],!1,null,null,null);_.default=d.exports}}]);