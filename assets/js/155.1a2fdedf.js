(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{630:function(_,v,t){"use strict";t.r(v);var d=t(11),r=Object(d.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"富媒体消息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#富媒体消息"}},[_._v("#")]),_._v(" 富媒体消息")]),_._v(" "),v("p",[_._v("仅用于在QQ单聊和QQ群聊内，发送图片、视频、语音、文件的相关富媒体资源在消息收发的候使用。\n本接口有以下两种使用方式：")]),_._v(" "),v("ol",[v("li",[v("p",[_._v("当 "),v("code",[_._v("srv_send_msg = true")]),_._v(" 时，消息会直接发送到目标端，占用 "),v("code",[_._v("主动消息频次")]),_._v("，超频会发送失败。")])]),_._v(" "),v("li",[v("p",[_._v("当 "),v("code",[_._v("srv_send_msg = false")]),_._v(" 时，消息不会直接发送到目标端，返回的 "),v("code",[_._v("file_info")]),_._v(" 字段数据，可使用在消息发送接口 "),v("code",[_._v("media")]),_._v(" 字段中，file_info 有 "),v("code",[_._v("过期时间")]),_._v(" ，开发者需要自行维护有效期，过期需要重新获得新的 "),v("code",[_._v("file_info")]),_._v("，"),v("code",[_._v("file_info")]),_._v(" 不受发送的目标端影响，一个 "),v("code",[_._v("file_info")]),_._v(" 可复用发送到多个群或多个用户（注意：用 "),v("code",[_._v("/v2/groups/{group_openid}/files")]),_._v(" 上传的文件，仅能发到群聊内，用 "),v("code",[_._v("/v2/users/{openid}/files")]),_._v(" 上传的文件，也仅能发送到单聊）。")])])]),_._v(" "),v("p",[_._v("推荐使用第 2 种方式")]),_._v(" "),v("h2",{attrs:{id:"用于单聊"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#用于单聊"}},[_._v("#")]),_._v(" 用于单聊")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("请求")])])]),_._v(" "),v("table",[v("tr",[v("th",{attrs:{colspan:"2"}},[_._v("基本")])]),_._v(" "),v("tr",[v("td",[_._v("HTTP URL")]),_._v(" "),v("td",[_._v("/v2/users/{openid}/files")])]),_._v(" "),v("tr",[v("td",[_._v("HTTP Method")]),_._v(" "),v("td",[_._v("POST")])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("路径参数")])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("必填")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("openid")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("QQ 用户的 openid，可在各类事件中获得。")])])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("请求参数")])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("必填")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("file_type")]),_._v(" "),v("td",[_._v("int")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("媒体类型：1 图片，2 视频，3 语音，4 文件（暂不开放）"),v("br"),_._v("资源格式要求"),v("br"),_._v("图片：png/jpg，视频：mp4，语音：silk")])]),_._v(" "),v("tr",[v("td",[_._v("url")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("需要发送媒体资源的url")])]),_._v(" "),v("tr",[v("td",[_._v("srv_send_msg")]),_._v(" "),v("td",[_._v("bool")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("设置 true 会直接发送消息到目标端，且会占用"),v("code",[_._v("主动消息频次")])])]),_._v(" "),v("tr",[v("td",[_._v("file_data")]),_._v(" "),v("td"),_._v(" "),v("td",[_._v("否")]),_._v(" "),v("td",[_._v("【暂未支持】")])])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("返回参数")])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("file_uuid")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("文件 ID")])]),_._v(" "),v("tr",[v("td",[_._v("file_info")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("文件信息，用于发消息接口的 media 字段使用")])]),_._v(" "),v("tr",[v("td",[_._v("ttl")]),_._v(" "),v("td",[_._v("int")]),_._v(" "),v("td",[_._v("有效期，表示剩余多少秒到期，到期后 file_info 失效，当等于 0 时，表示可长期使用")])]),_._v(" "),v("tr",[v("td",[_._v("id")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("发送消息的唯一ID，当srv_send_msg设置为true时返回")])])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("错误码")])])]),_._v(" "),v("h2",{attrs:{id:"用于群聊"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#用于群聊"}},[_._v("#")]),_._v(" 用于群聊")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("请求")])])]),_._v(" "),v("table",[v("tr",[v("th",{attrs:{colspan:"2"}},[_._v("基本")])]),_._v(" "),v("tr",[v("td",[_._v("HTTP URL")]),_._v(" "),v("td",[_._v("/v2/groups/{group_openid}/files")])]),_._v(" "),v("tr",[v("td",[_._v("HTTP Method")]),_._v(" "),v("td",[_._v("POST")])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("路径参数")])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("必填")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("group_openid")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("群聊的 openid")])])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("请求参数")])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("必填")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("file_type")]),_._v(" "),v("td",[_._v("int")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("媒体类型：1 图片，2 视频，3 语音，4 文件（暂不开放）"),v("br"),_._v("资源格式要求"),v("br"),_._v("图片：png/jpg，视频：mp4，语音：silk")])]),_._v(" "),v("tr",[v("td",[_._v("url")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("需要发送媒体资源的url")])]),_._v(" "),v("tr",[v("td",[_._v("srv_send_msg")]),_._v(" "),v("td",[_._v("bool")]),_._v(" "),v("td",[_._v("是")]),_._v(" "),v("td",[_._v("设置 true 会直接发送消息到目标端，且会占用"),v("code",[_._v("主动消息频次")])])]),_._v(" "),v("tr",[v("td",[_._v("file_data")]),_._v(" "),v("td"),_._v(" "),v("td",[_._v("否")]),_._v(" "),v("td",[_._v("【暂未支持】")])])])]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("返回参数")])])]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("类型")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("file_uuid")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("文件 ID")])]),_._v(" "),v("tr",[v("td",[_._v("file_info")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("文件信息，用于发消息接口的 media 字段使用")])]),_._v(" "),v("tr",[v("td",[_._v("ttl")]),_._v(" "),v("td",[_._v("int")]),_._v(" "),v("td",[_._v("有效期，表示剩余多少秒到期，到期后 file_info 失效，当等于 0 时，表示可长期使用")])]),_._v(" "),v("tr",[v("td",[_._v("id")]),_._v(" "),v("td",[_._v("string")]),_._v(" "),v("td",[_._v("发送消息的唯一ID，当srv_send_msg设置为true时返回")])])])])])}),[],!1,null,null,null);v.default=r.exports}}]);